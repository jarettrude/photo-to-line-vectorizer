[lint]
select = ["E", "F", "W", "I", "N", "UP", "B", "A", "C4", "DTZ", "T10", "EM", "ISC", "ICN", "PIE", "PYI", "Q", "RSE", "RET", "SIM", "TID", "TCH", "ARG", "PTH", "PD", "PGH", "PL", "TRY", "NPY", "RUF"]
# E501: Line too long (handled by formatter)
# B008: FastAPI Depends() in defaults is idiomatic
# TRY301: FastAPI HTTPException pattern
# TRY401: Logging with exception context
ignore = ["E501", "B008", "TRY301", "TRY401"]

[lint.per-file-ignores]
"__init__.py" = ["F401"]
"tests/*" = ["ARG", "PLR2004", "NPY002", "PLC0415"]
# API endpoints use Request for rate limiting (required by slowapi)
# Global processor for ML model lazy loading
"app/api/endpoints.py" = ["ARG001", "PLC0415", "A002", "PLW0603"]
# API models use magic numbers for validation ranges
"app/api/models.py" = ["PLR2004"]
# Auth uses FastAPI patterns with Depends
"app/auth/*" = ["ARG002", "PLC0415", "TRY300", "B904"]
# Pipeline modules may need late imports for optional dependencies
"app/pipeline/*" = ["PLC0415", "ARG002", "PLR2004", "PLR0913", "TRY300", "B904", "A002", "F401"]
# Main app lifespan parameter required by FastAPI
"app/main.py" = ["ARG001"]
# Models use short variable names and PyTorch conventions
"app/models/*" = ["N812", "E741", "PLR2004"]
# Preprocessor uses standard CV variable names
"app/pipeline/preprocess.py" = ["RUF012", "E741"]
# Storage uses globals for singleton pattern
"app/storage/*" = ["PLW0603", "PLW0602", "ARG002"]

[format]
quote-style = "double"
indent-style = "space"
line-ending = "lf"
